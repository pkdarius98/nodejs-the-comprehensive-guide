<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="REST Server" name="title"/>
            <meta content="Sebastian Springer" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2022 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Node.js - The Comprehensive Guide - REST Server" name="description"/>
            <meta content="en" name="language"/>
            <title>REST Server</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000029756394" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_kapitel">
                        <div id="main">
        <h2 class="t2" id="h10.5">10.5    <a id="p309"/>Write Requests<a class="indexanchor" id="i10_37"/></h2>
        <p class="standard">Whereas the request scheme for read accesses could still be adopted with almost no changes at all, and the few adjustments were primarily implemented in the controller and in the model, for write accesses, we must also change the routes. At this point, the default implementation of REST provides for using the various methods provided by HTTP for the respective purpose. For example, the <samp class="listingcharacter listingcharacter">POST</samp> method<a class="indexanchor" id="i10_38"/> is used for requests that create data records, while the <samp class="listingcharacter listingcharacter">PUT</samp> method<a class="indexanchor" id="i10_39"/> is used for requests that update data records. It’s also important at this point to model the server’s return correctly and to use the appropriate status codes.</p>
        
            <h3 class="t3" id="h10.5.1">10.5.1    POST: Creating New Data Records</h3>
            <p class="standard">When creating new data records, you use the <samp class="listingcharacter listingcharacter">POST</samp> method with the common URI. So, to create a new movie, you post to <span class="italic">http://localhost:8080/movie</span>. The <samp class="listingcharacter listingcharacter">content-type</samp> header<a class="indexanchor" id="i10_40"/> of the request has the value <samp class="listingcharacter listingcharacter">application/json</samp><a class="indexanchor" id="i10_41"/>, and the body of the request contains the data record to be created. This is already the first difference from the previous implementation, in which the data was sent to the server using an HTML form. For your application to handle the JSON body of the request, you must use the <samp class="listingcharacter listingcharacter">json</samp> method instead of the <samp class="listingcharacter listingcharacter">urlencoded</samp> method of the body parser integrated in Express. <span class="crossreference "><a href="10_005.html#l10.16">Listing 10.16</a></span> contains the custom source code of the entry file.</p>
            <div class="listing " id="l10.16"><pre><span class="rot">import</span><span class="schwarz"> express </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'express'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> morgan </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'morgan'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> { router </span><span class="rot">as</span><span class="schwarz"> movieRouter } </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./movie/index.js'</span><span class="schwarz">;</span><br/> <br/><span class="rot">const</span><span class="schwarz"> app </span><span class="dunkelblau">=</span><span class="schwarz"> express();</span><br/> <br/>app.use(morgan(<span class="hellblau">'common'</span><span class="schwarz">, { immediate: </span><span class="rot">true</span><span class="schwarz"> }));</span><br/> <br/><span class="bold"><samp class="listingcharacter listingcharacter">app.use(express.json());<br/> </samp></span><br/>app.use(<span class="hellblau">'/movie'</span><span class="schwarz">, movieRouter);</span><br/> <br/>app.get(<span class="hellblau">'/'</span><span class="schwarz">, (request, response) </span><span class="dunkelblau">=&gt;</span><span class="schwarz"> response.redirect(</span><span class="hellblau">'/movie'</span><span class="schwarz">));</span><br/> <br/>app.listen(8080, () <span class="dunkelblau">=&gt;</span><span class="schwarz"> {</span><br/>  <span class="magenta">console</span><span class="schwarz">.log(</span><span class="hellblau">'Server is listening to http://localhost:8080'</span><span class="schwarz">);</span><br/>}); <span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.16</b>    
            Adjustments to the Body Parser (index.js)</p>
            <p class="standard">In the next step, you’ll create a new route for creating data records. You define this route in the <span class="italic">movie/index.js</span> file, as shown in <span class="crossreference "><a href="10_005.html#l10.17">Listing 10.17</a></span>.</p>
            <div class="listing " id="l10.17"><pre><span class="rot"><a id="p310"/>import</span><span class="schwarz"> { Router } </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'express'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> { listAction, detailAction, </span><span class="bold"><samp class="listingcharacter listingcharacter">createAction</samp></span> } <span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./controller.js'</span><span class="schwarz">;</span><br/> <br/><span class="rot">const</span><span class="schwarz"> router </span><span class="dunkelblau">=</span><span class="schwarz"> Router();</span><br/> <br/>router.get(<span class="hellblau">'/'</span><span class="schwarz">, listAction);</span><br/>router.get(<span class="hellblau">'/:id'</span><span class="schwarz">, detailAction);</span><br/><span class="bold"><samp class="listingcharacter listingcharacter">router.post(<span class="hellblau">'/'</span><span class="schwarz">, createAction);</span><br/> </samp></span><br/><span class="rot">export</span><span class="schwarz"> { router }; </span><span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.17</b>    
            Extending the Route Definitions for Creating New Data Records (movie/index.js)</p>
            <p class="standard">When implementing <samp class="listingcharacter listingcharacter">createAction</samp> in the controller, you first read the information from the incoming request, call the model’s <samp class="listingcharacter listingcharacter">save</samp> method, and return the complete newly created data record as a JSON object. To keep the source code a bit more compact, we don’t support different formats at this point. You set the status of the response to <samp class="listingcharacter listingcharacter">201</samp> if successful, which indicates to the client that a data record has been created. If an error occurs, you send a response with the status code <samp class="listingcharacter listingcharacter">500</samp> to the client along with the error message. <span class="crossreference "><a href="10_005.html#l10.18">Listing 10.18</a></span> shows the source code of <samp class="listingcharacter listingcharacter">createAction</samp>.</p>
            <div class="listing " id="l10.18"><pre><span class="rot">import</span><span class="schwarz"> { getAll, </span><span class="rot">get</span><span class="schwarz">, </span><span class="bold"><samp class="listingcharacter listingcharacter">save</samp></span> } <span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./model.js'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> jsonXml </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'jsontoxml'</span><span class="schwarz">;</span><br/> <br/><span class="rot">function</span><span class="schwarz"> getLinks(current, base) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> listAction(request, response) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> detailAction(request, response) {...}</span><br/> <br/><span class="bold"><samp class="listingcharacter listingcharacter"><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> createAction(request, response) {</span><br/>  <span class="rot">try</span><span class="schwarz"> {</span><br/>    <span class="rot">const</span><span class="schwarz"> movie </span><span class="dunkelblau">=</span><span class="schwarz"> {</span><br/>      title: request.body.title,<br/>      year: request.body.year,<br/>      <span class="rot">public</span><span class="schwarz">: parseInt(request.body.</span><span class="rot">public</span><span class="schwarz">, 10) </span><span class="dunkelblau">===</span><span class="schwarz"> 1 </span><span class="dunkelblau">?</span><span class="schwarz"> 1 : 0,</span><br/>    };<br/>    <span class="rot">const</span><span class="schwarz"> newMovie </span><span class="dunkelblau">=</span><span class="schwarz"> </span><span class="rot">await</span><span class="schwarz"> save(movie, 1);</span><br/>    response.status(201).json(newMovie);<br/>  } <span class="rot">catch </span><span class="schwarz">(</span><span class="rot">e</span><span class="schwarz">) {</span><br/>    <span class="magenta">console</span><span class="schwarz">.error(e);</span><br/>    response.status(500).json(<span class="hellblau">'An error happened'</span><span class="schwarz">);</span><br/><a id="p311"/>  }<br/>}</samp></span> <span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.18</b>    
            “createAction” of the Controller (movie/controller.js)</p>
            <p class="standard">Now you can also create data records in your application. No changes are required to the model because it already returns the newly generated data record as required by the controller. <span class="crossreference "><a href="10_005.html#l10.19">Listing 10.19</a></span> shows such a create request via cURL.</p>
            <div class="listing " id="l10.19"><pre><span class="bold"><span class="schwarz"/><samp class="listingcharacter listingcharacter">$ curl  <span class="dunkelblau">-</span><span class="schwarz">X POST </span><span class="dunkelblau">-</span><span class="schwarz">H </span><span class="hellblau">"Content-Type: application/json"</span><span class="schwarz"> </span><span class="dunkelblau">-</span><span class="schwarz">d '{</span><span class="hellblau">"title"</span><span class="schwarz">: </span><span class="hellblau">"Antman"</span><span class="schwarz">, </span><br/><span class="hellblau">"year"</span><span class="schwarz">: 2015, </span><span class="hellblau">"public"</span><span class="schwarz">: 1, </span><span class="hellblau">"user"</span><span class="schwarz">: 1}' http:</span><span class="dunkelblau">//</span><span class="schwarz">localhost:8080</span><span class="dunkelblau">/</span><span class="schwarz">movie</span></samp></span><br/>{<span class="hellblau">"title"</span><span class="schwarz">:</span><span class="hellblau">"Antman"</span><span class="schwarz">,</span><span class="hellblau">"year"</span><span class="schwarz">:2015,</span><span class="hellblau">"public"</span><span class="schwarz">:1,</span><span class="hellblau">"id"</span><span class="schwarz">:4,</span><span class="hellblau">"user"</span><span class="schwarz">: 1} </span><span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.19</b>    
            Creating a New Data Record with cURL</p>
            <p class="standard">Write requests, in particular, can be formulated much more comfortably with a graphical tool such as Postman than via the command line. As you can see in <span class="crossreference "><a href="10_005.html#f10.5">Figure 10.5</a></span>, you choose the appropriate HTTP method, in this case, <span class="screenelement">POST</span>; specify the URL <span class="italic">http://localhost:8080/movie</span>; and compose the request body as a simple JSON object in the <span class="screenelement">Body</span> tab as raw type in <span class="screenelement">JSON</span> format. </p>
            <div class="imagebox figure-type"><a href="img-f10.5.html" id="f10.5"><img alt="Creating a New Data Record with Postman" id="img-f10.5" src="bilderklein/klein10_005.png"/></a></div>
            <p class="caption "><b>Figure 10.5</b>    
            Creating a New Data Record with Postman</p>
            <p class="standard"><a id="p312"/>The integrated editor supports you, for example, with syntax highlighting<a class="indexanchor" id="i10_42"/> and double-quote completion.</p>
        
        
            <h3 class="t3" id="h10.5.2">10.5.2    PUT: Modifying Existing Data Records<a class="indexanchor" id="i10_43"/></h3>
            <p class="standard">For updating data records, you proceed in a way similar to that of creating new data records. For example, if you want to modify the record with ID 4 in your movie database, you send a request to <span class="italic">http://localhost:8080/movie/4</span> using the HTTP <samp class="listingcharacter listingcharacter">PUT</samp> method. You insert the complete customized record in JSON format into the body of the request and provide it with the <samp class="listingcharacter listingcharacter">content-type: application/json</samp> header<a class="indexanchor" id="i10_44"/>. To customize the application, you must start from the router again. Here, you add an appropriate entry like the one shown in <span class="crossreference "><a href="10_005.html#l10.20">Listing 10.20</a></span> to the <span class="italic">movie/index.js</span> file.</p>
            <div class="listing " id="l10.20"><pre><span class="rot">import</span><span class="schwarz"> { Router } </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'express'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> {</span><br/>  listAction,<br/>  detailAction,<br/>  createAction,<br/>  <span class="bold"><samp class="listingcharacter listingcharacter">updateAction,</samp></span><br/>} <span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./controller.js'</span><span class="schwarz">;</span><br/> <br/><span class="rot">const</span><span class="schwarz"> router </span><span class="dunkelblau">=</span><span class="schwarz"> Router();</span><br/> <br/>router.get(<span class="hellblau">'/'</span><span class="schwarz">, listAction);</span><br/>router.get(<span class="hellblau">'/:id'</span><span class="schwarz">, detailAction);</span><br/>router.post(<span class="hellblau">'/'</span><span class="schwarz">, createAction);</span><br/><span class="bold"><samp class="listingcharacter listingcharacter">router.put(<span class="hellblau">'/:id'</span><span class="schwarz">, updateAction);</span><br/> </samp></span><br/><span class="rot">export</span><span class="schwarz"> { router }; </span><span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.20</b>    
            Adding the Update Route (movie/index.js)</p>
            <p class="standard">Like the detail route, the update route contains a variable named <samp class="listingcharacter listingcharacter">id</samp>, which you can access within your controller. After customizing the router, the next step is to implement <samp class="listingcharacter listingcharacter">updateAction</samp> in the controller (see <span class="crossreference "><a href="10_005.html#l10.21">Listing 10.21</a></span>); its structure is similar to that of <samp class="listingcharacter listingcharacter">createAction</samp>.</p>
            <div class="listing " id="l10.21"><pre><span class="rot">import</span><span class="schwarz"> { getAll, </span><span class="rot">get</span><span class="schwarz">, save } </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./model.js'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> jsonXml </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'jsontoxml'</span><span class="schwarz">;</span><br/> <br/><span class="rot">function</span><span class="schwarz"> getLinks(current, base) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> listAction(request, response) {...}</span><br/> <br/><span class="rot"><a id="p313"/>export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> detailAction(request, response) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> createAction(request, response) {...}</span><br/> <br/><span class="bold"><samp class="listingcharacter listingcharacter"><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> updateAction(request, response) {</span><br/>  <span class="rot">try</span><span class="schwarz"> {</span><br/>    <span class="rot">const</span><span class="schwarz"> movie </span><span class="dunkelblau">=</span><span class="schwarz"> {</span><br/>      id: request.params.id,<br/>      title: request.body.title,<br/>      year: request.body.year,<br/>      <span class="rot">public</span><span class="schwarz">: parseInt(request.body.</span><span class="rot">public</span><span class="schwarz">, 10) </span><span class="dunkelblau">===</span><span class="schwarz"> 1 </span><span class="dunkelblau">?</span><span class="schwarz"> 1 : 0,</span><br/>    };<br/> <br/>    <span class="rot">const</span><span class="schwarz"> updatedMovie </span><span class="dunkelblau">=</span><span class="schwarz"> </span><span class="rot">await</span><span class="schwarz"> model.save(movie, 1);</span><br/>    response.json(movie);<br/>  } <span class="rot">catch </span><span class="schwarz">(</span><span class="rot">e</span><span class="schwarz">) {</span><br/>    response.status(500).json(error);<br/>  }<br/>}</samp></span> <span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.21</b>    
            Implementing “updateAction” in the Controller (movie/controller.js)</p>
            <p class="standard">At this point, you just need to extract the ID of the data record you want to change from <samp class="listingcharacter listingcharacter">request.params</samp><a class="indexanchor" id="i10_45"/>. Again, no further adjustment to the model is required, and you can test the new feature of your interface after restarting the server process.</p>
            <p class="standard">If you run the command shown in <span class="crossreference "><a href="10_005.html#l10.22">Listing 10.22</a></span> after making these changes, you update the record with ID 4 and receive the modified record back from the server as a response.</p>
            <div class="listing " id="l10.22"><pre><span class="bold"><samp class="listingcharacter listingcharacter">$ curl <br/>  -X PUT <br/>  -H "application/json" <br/>  -d '{"title": "Black Panther", <br/>"year": 2018, "public": 1, "user": 1}' <br/>  http://localhost:8080/movie/4</samp></span><br/>{"id":"4","title":"Black Panther","year":2018,"public":1,"user":1} </pre></div>
            <p class="caption "><b>Listing 10.22</b>    
            Modifying a Data Record with cURL</p>
            <p class="standard"><span class="crossreference "><a href="10_005.html#f10.6">Figure 10.6</a></span> shows how you can manipulate the record with ID 4 using the Postman GUI. In contrast to the process of creating a data record, you must change the HTTP method from <span class="screenelement">POST</span> to <span class="screenelement">PUT</span>, pass ID 4 as part of the URL path, and customize the request body as required.</p>
            <p class="standard">The last feature still missing for the basic functionality of your REST interface is the option to delete data records.</p>
            <div class="imagebox figure-type"><a href="img-f10.6.html" id="f10.6"><img alt="Updating a Data Record with Postman" id="img-f10.6" src="bilderklein/klein10_006.png"/></a></div>
            <p class="caption "><b>Figure 10.6</b>    
            <a id="p314"/>Updating a Data Record with Postman</p>
        
        
            <h3 class="t3" id="h10.5.3">10.5.3    DELETE: Deleting Data Records<a class="indexanchor" id="i10_46"/></h3>
            <p class="standard">Similar to creating and updating records, you use a special HTTP method when deleting data records: the <samp class="listingcharacter listingcharacter">DELETE</samp> method, which requires the creation of a new route, as shown in <span class="crossreference "><a href="10_005.html#l10.23">Listing 10.23</a></span>.</p>
            <div class="listing " id="l10.23"><pre><span class="rot">import</span><span class="schwarz"> { Router } </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'express'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> {</span><br/>  listAction,<br/>  detailAction,<br/>  createAction,<br/>  updateAction,<br/>  <span class="bold"><samp class="listingcharacter listingcharacter">deleteAction,</samp></span><br/>} <span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./controller.js'</span><span class="schwarz">;</span><br/> <br/><span class="rot">const</span><span class="schwarz"> router </span><span class="dunkelblau">=</span><span class="schwarz"> Router();</span><br/> <br/>router.get(<span class="hellblau">'/'</span><span class="schwarz">, listAction);</span><br/>router.get(<span class="hellblau">'/:id'</span><span class="schwarz">, detailAction);</span><br/>router.post(<span class="hellblau">'/'</span><span class="schwarz">, createAction);</span><br/><a id="p315"/>router.put(<span class="hellblau">'/:id'</span><span class="schwarz">, updateAction);</span><br/><span class="bold"><samp class="listingcharacter listingcharacter">router.delete(<span class="hellblau">'/:id'</span><span class="schwarz">, deleteAction);</span><br/> </samp></span><br/><span class="rot">export</span><span class="schwarz"> { router }; </span><span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.23</b>    
            Route for Deleting Data Records (movie/index.js)</p>
            <p class="standard">You implement the <samp class="listingcharacter listingcharacter">deleteAction</samp> function of the controller, like the other action functions, as an <samp class="listingcharacter listingcharacter">async</samp> function. It obtains a reference to request and response, extracts the ID of the data record to be deleted from <samp class="listingcharacter listingcharacter">request.params</samp> in the first step, and then converts it to an integer. After that, you call the <samp class="listingcharacter listingcharacter">remove</samp> function of the model using the <samp class="listingcharacter listingcharacter">await</samp> keyword and the arguments <samp class="listingcharacter listingcharacter">id</samp> and <samp class="listingcharacter listingcharacter">userId 1</samp>. If the application returns an exception in this process, you log it to the console and return a response with status code <samp class="listingcharacter listingcharacter">500</samp> and body <samp class="listingcharacter listingcharacter">An error happened</samp>. If successful, the status code is <samp class="listingcharacter listingcharacter">204</samp>, which corresponds to an empty successful response. <span class="crossreference "><a href="10_005.html#l10.24">Listing 10.24</a></span> shows the source code of the <samp class="listingcharacter listingcharacter">deleteAction</samp> function.</p>
            <div class="listing " id="l10.24"><pre><span class="rot">import</span><span class="schwarz"> { getAll, </span><span class="rot">get</span><span class="schwarz">, save, </span><span class="bold"><samp class="listingcharacter listingcharacter">remove</samp></span> } <span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'./model.js'</span><span class="schwarz">;</span><br/><span class="rot">import</span><span class="schwarz"> jsonXml </span><span class="rot">from</span><span class="schwarz"> </span><span class="hellblau">'jsontoxml'</span><span class="schwarz">;</span><br/> <br/><span class="rot">function</span><span class="schwarz"> getLinks(current, base) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> listAction(request, response) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> detailAction(request, response) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> createAction(request, response) {...}</span><br/> <br/><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> updateAction(request, response) {...}</span><br/> <br/><span class="bold"><samp class="listingcharacter listingcharacter"><span class="rot">export</span><span class="schwarz"> </span><span class="rot">async</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> deleteAction(request, response) {</span><br/>  <span class="rot">try</span><span class="schwarz"> {</span><br/>    <span class="rot">const</span><span class="schwarz"> id </span><span class="dunkelblau">=</span><span class="schwarz"> parseInt(request.params.id, 10);</span><br/>    <span class="rot">await</span><span class="schwarz"> remove(id, 1);</span><br/>    response.status(204).send();<br/>  } <span class="rot">catch </span><span class="schwarz">(</span><span class="rot">e</span><span class="schwarz">) {</span><br/>    <span class="magenta">console</span><span class="schwarz">.error(e);</span><br/>    response.status(500).send(<span class="hellblau">'An error happened'</span><span class="schwarz">);</span><br/>  }<br/>}</samp></span> <span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.24</b>    
            “deleteAction” in the Controller (movie/controller.js)</p>
            <p class="standard">The delete operation doesn’t require any changes to the model, so you can use the source code as it is. The HTTP <samp class="listingcharacter listingcharacter">DELETE</samp> request to <span class="italic">http://localhost:8080/movie/4</span> now <a id="p316"/>enables you to delete the data record with ID 4 from the database, for example. With cURL, a corresponding request looks like the one shown in <span class="crossreference "><a href="10_005.html#l10.25">Listing 10.25</a></span>.</p>
            <div class="listing " id="l10.25"><pre>$ curl <span class="dunkelblau">-</span><span class="schwarz">X DELETE http:</span><span class="dunkelblau">//</span><span class="schwarz">localhost:8080</span><span class="dunkelblau">/</span><span class="schwarz">movie</span><span class="dunkelblau">/</span><span class="schwarz">4 </span><span class="schwarz"/></pre></div>
            <p class="caption "><b>Listing 10.25</b>    
            Deleting a Data Record with cURL</p>
            <p class="standard">As a result of this request, you won’t see any direct output because the <samp class="listingcharacter listingcharacter">deleteAction</samp> response was sent with status code <samp class="listingcharacter listingcharacter">204</samp><a class="indexanchor" id="i10_47"/> and no response body. In this case, no output is a good response. A similar result occurs when you send the <samp class="listingcharacter listingcharacter">DELETE</samp> request with Postman, as you can see in <span class="crossreference "><a href="10_005.html#f10.7">Figure 10.7</a></span>.</p>
            <div class="imagebox figure-type"><a href="img-f10.7.html" id="f10.7"><img alt="Deleting a Data Record with Postman" id="img-f10.7" src="bilderklein/klein10_007.png"/></a></div>
            <p class="caption "><b>Figure 10.7</b>    
            Deleting a Data Record with Postman</p>
        
    </div><p class="signatur"/>
                    </body>
                </html>