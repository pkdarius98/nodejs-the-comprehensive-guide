<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="Quality Assurance" name="title"/>
            <meta content="Sebastian Springer" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2022 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Node.js - The Comprehensive Guide - Quality Assurance" name="description"/>
            <meta content="en" name="language"/>
            <title>Quality Assurance</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000029756394" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_kapitel">
                        <div id="main">
        <h2 class="t2" id="h22.2">22.2    Linter<a class="indexanchor" id="i22_13"/></h2>
        <p class="standard">As you saw in <span class="crossreference "><a href="22_001.html#f22.1">Figure 22.1</a></span>, there is a reference to ESLint for most of the rules in the Airbnb style guide. This is a program that detects antipatterns in the source code and points them out to you as the developer. Like any other programming language, JavaScript has its pros and cons. Douglas Crockford<a class="indexanchor" id="i22_14"/>, the inventor of the JavaScript Object Notation (JSON) format, set out to improve JavaScript. For this purpose, he developed the JSLint<a class="indexanchor" id="i22_15"/> program (<span class="url"><a href="http://www.jslint.com/">www.jslint.com/</a></span>). This program scans your source code for known antipatterns and points them out to you. The patterns JSLint looks for represent known weaknesses of JavaScript. It also directs your attention to code sections that often cause errors in applications.</p>
        <p class="standard">In addition to JSLint, there are several other very similar tools, including JSHint<a class="indexanchor" id="i22_16"/> and ESLint<a class="indexanchor" id="i22_17"/>. JSLint is the oldest of these programs, and it’s very strict and not very flexible. These problems are addressed by JSHint, which is a fork of JSLint. JSHint can be significantly better adapted to the requirements of a development team through configuration measures. In many projects, however, it turned out that JSHint wasn’t flexible enough <a id="p644"/>either. For this reason, ESLint was developed and has now established itself as a quasi-standard.</p>
        
            <h3 class="t3" id="h22.2.1">22.2.1    ESLint<a class="indexanchor" id="i22_18"/></h3>
            <p class="standard">ESLint is currently the best linter for JavaScript. This tool supports all the rules available to you in JSLint and JSHint and extends them with additional ones. ESLint has a modular structure, covers a large number of use cases, and can be configured in great detail. In addition, ESLint supports both JavaScript and TypeScript as programming languages. You can find the official project site of ESLint with a lot of further information at <span class="url"><a href="https://eslint.org/">https://eslint.org/</a></span>.</p>
            
                <h4 class="t4" id="h22.2.1.1"><a class="indexanchor" id="i22_19"/>Installation</h4>
                <p class="standard">All linters mentioned here, that is, JSLint, JSHint, and also ESLint, can be installed on your system via the Node Package Manager (npm). Using the command line from <span class="crossreference "><a href="22_002.html#l22.1">Listing 22.1</a></span>, you can install ESLint as <samp class="listingcharacter listingcharacter">devDependency</samp> in your application.</p>
                <div class="listing " id="l22.1"><pre>$ npm install –-save-dev eslint </pre></div>
                <p class="caption "><b>Listing 22.1</b>    
            Installing ESLint</p>
                <p class="standard">While it used to be common practice to install tools such as ESLint globally, it’s now recommended to install the tool only per application. To run ESLint, you can use either <samp class="listingcharacter listingcharacter">npx</samp> via the <samp class="listingcharacter listingcharacter">npx eslint</samp> command or alternatively Yarn via <samp class="listingcharacter listingcharacter">yarn run eslint</samp>.</p>
            
            
                <h4 class="t4" id="h22.2.1.2">Configuration<a class="indexanchor" id="i22_20"/></h4>
                <p class="standard">A feature of ESLint is that almost all aspects can be configured. For example, each rule is a separate plug-in you can activate and configure. To do that, you can either use command-line options or create a configuration file named <span class="italic">.eslintrc</span><a class="indexanchor" id="i22_21"/>. The format of the configuration file can be JavaScript, YAML, and JSON, all of which are supported. Alternatively, you can integrate the configuration in your <span class="italic">package.json</span> file under the <samp class="listingcharacter listingcharacter">eslintConfig</samp> key.</p>
                <p class="standard">You don’t need to create the configuration yourself, but can rather use the interactive mode of ESLint, which can be launched via the <samp class="listingcharacter listingcharacter">--init</samp> command-line option. This mode guides you through the process of creating the configuration based on a few questions. During this process, you’ll be asked, for example, whether you want to use an existing style guide such as Airbnb<a class="indexanchor" id="i22_22"/><a class="indexanchor" id="i22_23"/>, whether you want to use React, or in which format the configuration file should be saved. <span class="crossreference "><a href="22_002.html#l22.2">Listing 22.2</a></span> shows an example of this interactive creation process. Once you’ve answered a question, ESLint writes the respective answer next to the question.</p>
                <div class="listing " id="l22.2"><pre><a id="p645"/>$ <span class="bold"><samp class="listingcharacter listingcharacter">npx eslint --init<br/></samp></span>✓ How would you like to use ESLint? · <span class="bold"><samp class="listingcharacter listingcharacter">style<br/></samp></span>✓ What type of modules does your project use? · <span class="bold"><samp class="listingcharacter listingcharacter">esm<br/></samp></span>✓ Which framework does your project use? · <span class="bold"><samp class="listingcharacter listingcharacter">none<br/></samp></span>✓ Does your project use TypeScript? · <span class="bold"><samp class="listingcharacter listingcharacter">No</samp></span> / Yes<br/>✓ Where does your code run? · browser, <span class="bold"><samp class="listingcharacter listingcharacter">node<br/></samp></span>✓ How would you like to define a style for your project? · <span class="bold"><samp class="listingcharacter listingcharacter">guide<br/></samp></span>✓ Which style guide do you want to follow? · <span class="bold"><samp class="listingcharacter listingcharacter">airbnb<br/></samp></span>✓ What format do you want your config file to be in? · <span class="bold"><samp class="listingcharacter listingcharacter">JSON</samp></span><br/>Checking peerDependencies of eslint-config-airbnb-base@latest<br/>The config that you've selected requires the following dependencies:<br/><br/>eslint-config-airbnb-base@latest eslint@^5.16.0 || ^6.8.0 || ^7.2.0 eslint-plugin-import@^2.22.1<br/>✓ Would you like to install them now with npm? · No / <span class="bold"><samp class="listingcharacter listingcharacter">Yes</samp></span><br/>Installing eslint-config-airbnb-base@latest, eslint@^5.16.0 || ^6.8.0 || ^7.2.0, eslint-plugin-import@^2.22.1<br/><br/>added 75 packages, and audited 191 packages in 3s<br/><br/>43 packages are looking for funding<br/>  run `npm fund` for details<br/><br/>found 0 vulnerabilities<br/>Successfully created .eslintrc.json file in /src/node </pre></div>
                <p class="caption "><b>Listing 22.2</b>    
            Interactive Mode in ESLint</p>
                <p class="standard">The result of this interactive creation process is shown in the <span class="italic">.eslintrc.json</span> file in <span class="crossreference "><a href="22_002.html#l22.3">Listing 22.3</a></span>.</p>
                <div class="listing " id="l22.3"><pre><span class="schwarz">{</span><span class="schwarz"><br/></span>    <span class="hellblau">"env"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>        <span class="hellblau">"es2021"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="rot">true</span><span class="schwarz">,</span><span class="schwarz"><br/></span>        <span class="hellblau">"node"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="rot">true</span><span class="schwarz"><br/></span>    <span class="schwarz">},</span><span class="schwarz"><br/></span>    <span class="hellblau">"extends"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">[</span><span class="schwarz"><br/></span>        <span class="hellblau">"airbnb-base"</span><span class="schwarz"><br/></span>    <span class="schwarz">],</span><span class="schwarz"><br/></span>    <span class="hellblau">"parserOptions"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>        <span class="hellblau">"ecmaVersion"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">12,</span><span class="schwarz"><br/></span>        <span class="hellblau">"sourceType"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="hellblau">"module"</span><span class="schwarz"><br/></span>    <span class="schwarz">},</span><span class="schwarz"><br/></span>    <span class="hellblau">"rules"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>    <span class="schwarz">}</span><span class="schwarz"><br/></span><span class="schwarz">}</span><span class="schwarz"> </span></pre></div>
                <p class="caption "><b>Listing 22.3</b>    
            ESLint Configuration (.eslintrc.json)</p>
                <p class="standard"><a id="p646"/>By specifying <samp class="listingcharacter listingcharacter">"node": true</samp> in the <samp class="listingcharacter listingcharacter">env</samp> section, you tell ESLint that you’re developing a Node.js application. <samp class="listingcharacter listingcharacter">"es2021: true</samp> ensures that you can use more recent JavaScript language features such as block scoping, destructuring, or the spread operator. With these options, the variables available globally in Node.js are predefined, and their use isn’t considered an error. In addition, module scoping is taken into account. The <samp class="listingcharacter listingcharacter">airbnb-base</samp> basis ensures that the Airbnb style guide rules are enabled, which you can further define in the <samp class="listingcharacter listingcharacter">rules</samp> section. You can also create such a <samp class="listingcharacter listingcharacter">rules</samp> section when using an existing style guide to enable or disable specific rules<a class="indexanchor" id="i22_24"/>.</p>
                <p class="standard">In the <samp class="listingcharacter listingcharacter">rules</samp> section, you can find the individual rules that are manually configured for ESLint for your project. For each rule, you can specify whether it’s active and whether it should cause a warning<a class="indexanchor" id="i22_25"/> or an error<a class="indexanchor" id="i22_26"/>. By specifying <samp class="listingcharacter listingcharacter">off</samp> or <samp class="listingcharacter listingcharacter">0</samp> as the first element in the array, you can turn off the rule; <samp class="listingcharacter listingcharacter">1</samp> or <samp class="listingcharacter listingcharacter">warning</samp> means that a warning message will be issued if this rule is violated; and <samp class="listingcharacter listingcharacter">2</samp> or <samp class="listingcharacter listingcharacter">error</samp> represents an error and means that following this rule is mandatory.</p>
                <p class="standard">For example, the Airbnb style guide specifies that destructuring statements should be preferred. If you want to override this rule, you should insert the name of the rule followed by the string <samp class="listingcharacter listingcharacter">off</samp> in the <samp class="listingcharacter listingcharacter">rules</samp> section, as shown in <span class="crossreference "><a href="22_002.html#l22.4">Listing 22.4</a></span>.</p>
                <div class="listing " id="l22.4"><pre><span class="schwarz">{</span><span class="schwarz"><br/></span>    <span class="hellblau">"env"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>        <span class="hellblau">"es2021"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="rot">true</span><span class="schwarz">,</span><span class="schwarz"><br/></span>        <span class="hellblau">"node"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="rot">true</span><span class="schwarz"><br/></span>    <span class="schwarz">},</span><span class="schwarz"><br/></span>    <span class="hellblau">"extends"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">[</span><span class="schwarz"><br/></span>        <span class="hellblau">"airbnb-base"</span><span class="schwarz"><br/></span>    <span class="schwarz">],</span><span class="schwarz"><br/></span>    <span class="hellblau">"parserOptions"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>        <span class="hellblau">"ecmaVersion"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">12,</span><span class="schwarz"><br/></span>        <span class="hellblau">"sourceType"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="hellblau">"module"</span><span class="schwarz"><br/></span>    <span class="schwarz">},</span><span class="schwarz"><br/></span>    <span class="hellblau">"rules"</span><span class="schwarz">:</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>        <span class="bold"><span class="schwarz"/><samp class="listingcharacter listingcharacter"><span class="hellblau">"prefer-destructuring"</span><span class="schwarz">: </span><span class="hellblau">"off"</span></samp></span><span class="schwarz"><br/></span>    }<br/>} <span class="schwarz"/></pre></div>
                <p class="caption "><b>Listing 22.4</b>    
            Disabling Portions of Rule Sets (.eslintrc.json)</p>
                <p class="standard">For more information on configuring ESLint, refer to the online documentation at <span class="url"><a href="http://eslint.org/docs/user-guide/configuring">http://eslint.org/docs/user-guide/configuring</a></span>. Once you’ve created the configuration, you can move on to testing your application.</p>
            
            
                <h4 class="t4" id="h22.2.1.3">Execution<a class="indexanchor" id="i22_27"/></h4>
                <p class="standard"><span class="crossreference "><a href="22_002.html#l22.5">Listing 22.5</a></span> shows a file to be analyzed for potential problems using ESLint.</p>
                <div class="listing " id="l22.5"><pre><span class="rot"><a id="p647"/>function</span><span class="schwarz"> </span><span class="schwarz">example(</span><span class="schwarz">input</span><span class="schwarz">)</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span><span class="rot">let</span><span class="schwarz"> output</span><span class="schwarz">;</span><span class="schwarz"><br/></span>  <span class="rot">if</span><span class="schwarz"> </span><span class="schwarz">(</span><span class="schwarz">input</span><span class="schwarz">.</span><span class="schwarz">length </span><span class="dunkelblau">&lt;</span><span class="schwarz"> </span><span class="schwarz">2)</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>    <span class="rot">throw</span><span class="schwarz"> </span><span class="rot">new </span><span class="schwarz">Error(</span><span class="hellblau">'Too few characters'</span><span class="schwarz">);</span><span class="schwarz"><br/></span>  <span class="schwarz">}</span><span class="schwarz"><br/></span> <br/>  <span class="rot">for</span><span class="schwarz"> </span><span class="schwarz">(</span><span class="rot">let</span><span class="schwarz"> i </span><span class="dunkelblau">=</span><span class="schwarz"> </span><span class="schwarz">0;</span><span class="schwarz"> i </span><span class="dunkelblau">&lt;</span><span class="schwarz"> </span><span class="schwarz">10;</span><span class="schwarz"> i</span><span class="dunkelblau">++</span><span class="schwarz">)</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>    output <span class="dunkelblau">+=</span><span class="schwarz"> </span><span class="violett">`${i}. Output: ${input}`</span><span class="schwarz"><br/></span>  <span class="schwarz">}</span><span class="schwarz"><br/></span> <br/>  <span class="rot">return</span><span class="schwarz"> output</span><span class="schwarz">;</span><span class="schwarz"><br/></span>  output <span class="dunkelblau">+=</span><span class="schwarz"> </span><span class="hellblau">"result"</span><span class="schwarz">;</span><span class="schwarz"><br/></span><span class="schwarz">}</span><span class="schwarz"><br/></span> <br/><span class="rot">function</span><span class="schwarz"> </span><span class="schwarz">greet(</span><span class="schwarz">user</span><span class="schwarz">)</span><span class="schwarz"> </span><span class="schwarz">{</span><span class="schwarz"><br/></span>  <span class="rot">const</span><span class="schwarz"> firstname </span><span class="dunkelblau">=</span><span class="schwarz"> user</span><span class="schwarz">.</span><span class="schwarz">firstname</span><span class="schwarz">;</span><span class="schwarz"><br/></span>  <span class="rot">const</span><span class="schwarz"> lastname </span><span class="dunkelblau">=</span><span class="schwarz"> user</span><span class="schwarz">.</span><span class="schwarz">lastname</span><span class="schwarz">;</span><span class="schwarz"><br/></span>  <span class="rot">return</span><span class="schwarz"> </span><span class="violett">`Hello ${firstname} ${lastname}`</span><span class="schwarz">;</span><span class="schwarz"><br/></span><span class="schwarz">}</span><span class="schwarz"> </span></pre></div>
                <p class="caption "><b>Listing 22.5</b>    
            Function to be Analyzed with ESLint (.index.js)</p>
                <p class="standard">Based on the configuration shown in <span class="crossreference "><a href="22_002.html#l22.4">Listing 22.4</a></span>, you first save the source code from <span class="crossreference "><a href="22_002.html#l22.5">Listing 22.5</a></span> in a file named <span class="italic">index.js</span>, and run ESLint on that file to receive the output shown in <span class="crossreference "><a href="22_002.html#l22.6">Listing 22.6</a></span>.</p>
                <div class="listing " id="l22.6"><pre><span class="bold"><samp class="listingcharacter listingcharacter">$ npx eslint index.js</samp></span><br/>/srv/node/index.js<br/>   1:10  error  'example' is defined but never used           no-unused-vars<br/>   2:1   error  Expected indentation of 2 spaces but found 0  indent<br/>   7:27  error  Unary operator '++' used                      no-plusplus<br/>   8:39  error  Missing semicolon                             semi<br/>  12:3   error  Unreachable code                              no-unreachable<br/>  12:13  error  Strings must use singlequote                  quotes<br/>  15:10  error  'greet' is defined but never used             no-unused-vars<br/><br/><img alt="inline image" class="inline_image" src="bilder/star-filled.png"/> 7 problems (7 errors, 0 warnings)<br/>  3 errors and 0 warnings potentially fixable with the `--fix` option. </pre></div>
                <p class="caption "><b>Listing 22.6</b>    
            ESLint Output</p>
                <p class="standard">The output of ESLint provides you with the following information: The first column indicates the location of the problem, including the line and column numbers; the second column indicates the type of problem, that is, error or warning; the third column contains a description of the problem; and the fourth column names the rule that was violated.</p>
                <p class="standard"><a id="p648"/>As you can see in the output, ESLint is able to fix some problems by itself. If you run the <samp class="listingcharacter listingcharacter">npx eslint --fix index.js</samp><a class="indexanchor" id="i22_28"/> command, the indentation gets corrected, double quotes are replaced by single quotes, and missing semicolons are inserted. This means that the number of errors is reduced from seven to four. Unused variables or unreachable code can’t be corrected by ESLint because this would mean an intervention in the program logic.</p>
                <p class="standard">Just enter the <samp class="listingcharacter listingcharacter">eslint</samp> command on the command line, and you’ll get more information about the possible options.</p>
            
            
                <h4 class="t4" id="h22.2.1.4">Integration into the Development Environment<a class="indexanchor" id="i22_29"/></h4>
                <p class="standard">In many development environments such as WebStorm, Eclipse, or Visual Studio Code, ESLint is either already a fixed component or can be integrated as a plug-in. This way, you can already check during the development of your application whether your source code meets certain quality criteria, and you’ll be notified by annotations in case of violations. <span class="crossreference "><a href="22_002.html#f22.2">Figure 22.2</a></span> shows the source code from <span class="crossreference "><a href="22_002.html#l22.5">Listing 22.5</a></span> in Visual Studio Code. The errors are underlined and highlighted in red on the right.</p>
                <div class="imagebox figure-type"><a href="img-f22.2.html" id="f22.2"><img alt="ESLint in Visual Studio Code" id="img-f22.2" src="bilderklein/klein22_002.png"/></a></div>
                <p class="caption "><b>Figure 22.2</b>    
            ESLint in Visual Studio Code</p>
            
        
    </div><p class="signatur"/>
                    </body>
                </html>