<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="Template Engines" name="title"/>
            <meta content="Sebastian Springer" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2022 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Node.js - The Comprehensive Guide - Template Engines" name="description"/>
            <meta content="en" name="language"/>
            <title>Template Engines</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000029756394" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_kapitel">
                        <div id="main"><h1 class="t1" id="h7">7    <a id="p213"/>Template Engines</h1><p class="introductorynote indent_chapter_single">If you want to enjoy the whole, you must see the whole in the smallest.<br/>—Johann Wolfgang von Goethe</p><p class="standard">This<a class="indexanchor" id="i07_00"/> chapter builds on the previous chapter and uses an Express<a class="indexanchor" id="i07_01"/> application as the basis. Throughout this chapter, you’ll learn about different template engines and their respective advantages and disadvantages. All the template engines presented aren’t tied to use with Express, but they are often used in combination. However, we’ll also introduce you to stand-alone use with each framework. But before we dive into the topic of template engines, let’s take a quick look at what a template engine is and what it can do for you.</p><p class="standard">Simply put, a template is a static structure, usually an HTML document, with markers that are replaced by concrete values by the template engine at a later point in time. Template engines offer a number of advantages that justify their use in web applications. These include the following, for example:</p><ul>
        <li>
            <p class="standard first-item last-item"><span class="bold">Separation of logic and markup</span><a class="indexanchor" id="i07_02"/><br/>Mixing HTML and JavaScript code in an application degrades the readability of the source code on both sides and thus also impacts the maintainability of the entire application. For this reason, it makes sense to separate the representation from the application logic as much as possible. Template engines contribute to this by giving you, the developer, a way to write templates without logic and insert the dynamic parts via markers.</p>
        </li>
        <li>
            <p class="standard first-item last-item"><span class="bold">Reusability</span><a class="indexanchor" id="i07_03"/><br/>Many template engines have features that allow you to subdivide templates to define blocks, called partials, and then dump them into separate files. Partials can thus be used multiple times in your application. This reusability ensures that you can make changes to the appearance of your application more quickly and conveniently.</p>
        </li>
        <li>
            <p class="standard first-item last-item"><a class="indexanchor" id="i07_04"/><span class="bold">Parallelization of work<br/></span>With a template engine, you can separate the work on the frontend and the backend of your application and parallelize the work. If a feature needs to be implemented, one developer can deal with the controllers and models that need to be implemented. In the meantime, other developers can already take care of implementing <a id="p214"/>the templates and frontend logic. Both teams coordinate at the controller-template interface and agree on which variables are available.</p>
        </li>
    </ul><p class="standard">Along with the advantages of using a template engine, the processing of the templates by the application, that is, searching and replacing the markers<a class="indexanchor" id="i07_05"/>, requires time and resources. However, there are solutions to this problem as well, namely, in the form of precompiling and caching. Before we introduce you to Pug, the first template engine in this chapter, let’s take a quick look at the previous chapter.</p>
        <h2 class="t2" id="h7.1">7.1    Custom<a class="indexanchor" id="i07_06"/> Template Engine</h2>
        <p class="standard">In <span class="crossreference "><a href="06_001.html#h6">Chapter 6</a></span>, you’ve already implemented a very lightweight template engine yourself. This was used for both the list view and the form. Let’s take the <span class="italic">movie/view.js</span> file as an example. This file is responsible for rendering the list and, at its core, consists of a function that provides the HTML structure. <span class="crossreference "><a href="07_001.html#l7.1">Listing 7.1</a></span> shows the source code of the view.</p>
        <div class="listing " id="l7.1"><pre><span class="bold"><span class="schwarz"/><samp class="listingcharacter listingcharacter"><span class="rot">export</span><span class="schwarz"> </span><span class="rot">function</span><span class="schwarz"> render(movies) {</span><br/>  <span class="rot">return</span><span class="schwarz"> </span><span class="violett">`</span></samp></span><br/>&lt;!DOCTYPE html&gt;<br/>&lt;html lang=<span class="hellblau">"en"</span><span class="violett">&gt;</span><br/>&lt;head&gt;<br/>  &lt;meta charset=<span class="hellblau">"UTF-8"</span><span class="violett">&gt;</span><br/>  &lt;title&gt;Movie list&lt;/title&gt;<br/>  &lt;link rel=<span class="hellblau">"stylesheet"</span><span class="violett"> href=</span><span class="hellblau">"style.css"</span><span class="violett"> /&gt;</span><br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;table&gt;<br/>    &lt;thead&gt;&lt;tr&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>      <span class="bold">${movies<br/>        .map(<br/>          (movie) =&gt; `</span><span class="schwarz"><br/></span>        <span class="dunkelblau">&lt;</span><span class="schwarz">tr</span><span class="dunkelblau">&gt;</span><span class="schwarz"><br/></span>          <span class="dunkelblau">&lt;</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="bold"><span class="schwarz">${movie.id}</span></span><span class="dunkelblau">&lt;/</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="schwarz"><br/></span>          <span class="dunkelblau">&lt;</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="bold"><span class="schwarz">${movie.title}</span></span><span class="dunkelblau">&lt;/</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="schwarz"><br/></span>          <span class="dunkelblau">&lt;</span><span class="schwarz">td</span><span class="dunkelblau">&gt;&lt;</span><span class="schwarz">a href</span><span class="dunkelblau">=</span><span class="hellblau">"/movie/delete/</span><span class="bold">${movie.id}</span>"<span class="dunkelblau">&gt;</span><span class="rot">delete</span><span class="dunkelblau">&lt;/</span><span class="schwarz">a</span><span class="dunkelblau">&gt;&lt;/</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="schwarz"><br/></span>          <span class="dunkelblau">&lt;</span><span class="schwarz">td</span><span class="dunkelblau">&gt;&lt;</span><span class="schwarz">a href</span><span class="dunkelblau">=</span><span class="hellblau">"/movie/form/</span><span class="bold">${movie.id}</span>"<span class="dunkelblau">&gt;</span><span class="schwarz">edit</span><span class="dunkelblau">&lt;/</span><span class="schwarz">a</span><span class="dunkelblau">&gt;&lt;/</span><span class="schwarz">td</span><span class="dunkelblau">&gt;</span><span class="schwarz"> </span><br/>        <span class="dunkelblau">&lt;/</span><span class="schwarz">tr</span><span class="dunkelblau">&gt;</span><span class="violett">`,</span><br/>        <span class="bold">)<br/>        .join(<span class="hellblau">''</span><span class="violett">)}</span></span><br/>    &lt;/tbody&gt;<br/>  &lt;/table&gt;<br/>  &lt;a href=<span class="hellblau">"/movie/form"</span><span class="violett">&gt;new&lt;/a&gt;</span><br/>&lt;/body&gt;<br/><a id="p215"/>&lt;/html&gt;<br/>  `<span class="schwarz">;</span><br/>} <span class="schwarz"/></pre></div>
        <p class="caption "><b>Listing 7.1</b>    
            Custom Template Engine Based on Template Strings</p>
        <p class="standard">The solution you’ve implemented in the movie database represents a simple type of template engine. It enables you to insert variables into your HTML structure, and, thanks to the functionality of JavaScript template strings, you can also formulate simple loops<a class="indexanchor" id="i07_07"/> or conditions<a class="indexanchor" id="i07_08"/>. In this case, you use the <samp class="listingcharacter listingcharacter">map</samp> and <samp class="listingcharacter listingcharacter">join</samp> methods to put an array into the appropriate form and integrate it into your template. The result is the list of movies present in the data source, displayed in an HTML table.</p>
        <p class="standard">Instead of using template strings<a class="indexanchor" id="i07_09"/>, you can also implement such a template engine by using markers in your template and then replacing them with dynamic content using the string <samp class="listingcharacter listingcharacter">replace</samp> method. Markers in this case are specially marked strings. Usually, special characters such as curly brackets are used here, resulting in markers such as <samp class="listingcharacter listingcharacter">{{movie}}</samp>.</p>
        <p class="standard">Basically, you should keep two things in mind about template engines:</p>
        <ul>
            <li>
                <p class="standard first-item last-item">Template editing takes time and resources<a class="indexanchor" id="i07_10"/> in itself, whether you use your own implementation or an existing engine. The templates must be processed.</p>
            </li>
            <li>
                <p class="standard first-item last-item">Template engines are anything but simple. The example shown in <span class="crossreference "><a href="07_001.html#l7.1">Listing 7.1</a></span> only covers a simple loop and variable substitution. Neither considerations about escaping or security<a class="indexanchor" id="i07_11"/> nor about troubleshooting<a class="indexanchor" id="i07_12"/> and performance<a class="indexanchor" id="i07_13"/> have been included. So, you probably get an idea of the scope of the established template engines.</p>
            </li>
        </ul>
        <p class="standard">After this short excursion into the implementation of template engines, in the following sections, you’ll learn how to use a template engine based on the example of Pug.</p>
    </div><p class="signatur"/>
                    </body>
                </html>