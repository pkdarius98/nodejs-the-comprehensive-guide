<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="Web Applications with Nest" name="title"/>
            <meta content="Sebastian Springer" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2022 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Node.js - The Comprehensive Guide - Web Applications with Nest" name="description"/>
            <meta content="en" name="language"/>
            <title>Web Applications with Nest</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000029756394" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_kapitel">
                        <div id="main"><h1 class="t1" id="h14">14    <a id="p413"/>Web Applications with Nest</h1><p class="introductorynote indent_chapter_double">Put it before them briefly so they will read it, clearly so they will appreciate it, picturesquely so they will remember it.<br/>—Joseph Pulitzer</p><p class="standard">Web<a class="indexanchor" id="i14_00"/> application frameworks for Node.js such as Express are a dime a dozen, and yet Express<a class="indexanchor" id="i14_01"/> is by far the most popular solution. However, Express also has a number of weaknesses that repeatedly lead to competitors gaining a foothold in the market. One of the biggest problems is the speed of development of Express. As you learned in <span class="crossreference "><a href="06_001.html#h6">Chapter 6</a></span>, the current fourth version of the framework has been on the market for quite a few years now, which isn’t necessarily good for one of the most widely used JavaScript frameworks because it means that major innovations and modernizations are missing.<a class="indexanchor" id="i14_02"/></p><p class="standard">This is exactly where a still young Node.js framework called Nest comes in. Nest aims to support the development of server-side JavaScript applications to implement efficient and scalable solutions. Nest is based on TypeScript<a class="indexanchor" id="i14_03"/>, which applies to both the framework itself and the code of your app. In addition, Nest brings architecture into your app. With Express, the middleware<a class="indexanchor" id="i14_04"/> system and routing<a class="indexanchor" id="i14_05"/> functions provide you with the basic tools even for large-scale applications. However, the framework doesn’t specify the structure<a class="indexanchor" id="i14_06"/> and architecture<a class="indexanchor" id="i14_07"/> of an application. Nest, on the other hand, adopts these concepts and provides you with software development frameworks to help you build an application. This way, you know exactly that your endpoints are in controller classes, business logic is swapped out to services, and database access is also encapsulated in services.</p><p class="standard">Another aspect of Nest is that the framework keeps the barrier to testing as low as possible. Most of the structures you need for testing are already prepared, so the only thing you need to worry about is implementing the actual test logic.</p><p class="standard">Basically, the philosophy of Nest is that you should focus on the business logic, which is what your application is all about. The framework takes care of everything else. That is why Nest has an extensive command-line tool, numerous optional modules, and comprehensive documentation.</p><p class="standard">In this chapter, you’ll get to know some of the details of Nest and now implement the MovieDB application you already implemented in Express with Nest so you can compare the two solutions.</p>
        <h2 class="t2" id="h14.1">14.1    <a id="p414"/>Installation<a class="indexanchor" id="i14_08"/> and Getting Started with Nest</h2>
        <p class="standard">Like many other major JavaScript frameworks, Nest provides you with a command-line interface (CLI) that makes it much easier to get started with development. The concept of the <span class="italic">Nest CLI</span><a class="indexanchor" id="i14_09"/> is that it should make redundant all the repetitive tasks in your project. This includes first the project setup and then the handling of different structures in the course of the project, but you’ll learn more about this in <span class="crossreference "><a href="14_002.html#h14.2">Section 14.2</a></span>.</p>
        <p class="standard">Nest consists of several packages in the <samp class="listingcharacter listingcharacter">@nestjs</samp><a class="indexanchor" id="i14_10"/> namespace. The CLI package is named <samp class="listingcharacter listingcharacter">@nestjs/cli</samp> and is installed system-wide via the <samp class="listingcharacter listingcharacter">npm install -g @nestjs/cli</samp> command. After the installation, the <samp class="listingcharacter listingcharacter">nest</samp> command is available on the command line, and you can start initializing your application. To do this, you must use the <samp class="listingcharacter listingcharacter">new</samp> command<a class="indexanchor" id="i14_11"/> of the CLI followed by the project name, as shown in <span class="crossreference "><a href="14_001.html#l14.1">Listing 14.1</a></span>. The command creates a new project named <samp class="listingcharacter listingcharacter">movie-db</samp>.</p>
        <div class="listing " id="l14.1"><pre>$ <span class="bold"><samp class="listingcharacter listingcharacter">nest new movie-db<br/></samp></span><img alt="inline image" class="inline_image" src="bilder/blitz.png"/>  We will scaffold your app in a few seconds..<br/><br/>CREATE movie-db/.eslintrc.js (631 bytes)<br/>CREATE movie-db/.prettierrc (51 bytes)<br/>CREATE movie-db/README.md (3339 bytes)<br/>CREATE movie-db/nest-cli.json (64 bytes)<br/>CREATE movie-db/package.json (1964 bytes)<br/>CREATE movie-db/tsconfig.build.json (97 bytes)<br/>CREATE movie-db/tsconfig.json (546 bytes)<br/>CREATE movie-db/src/app.controller.spec.ts (617 bytes)<br/>CREATE movie-db/src/app.controller.ts (274 bytes)<br/>CREATE movie-db/src/app.module.ts (249 bytes)<br/>CREATE movie-db/src/app.service.ts (142 bytes)<br/>CREATE movie-db/src/main.ts (208 bytes)<br/>CREATE movie-db/test/app.e2e-spec.ts (630 bytes)<br/>CREATE movie-db/test/jest-e2e.json (183 bytes)<br/><br/>? Which package manager would you ♥ to use? (Use arrow keys)<br/><img alt="inline image" class="inline_image" src="bilder/pfeil_fett.png"/>npm <br/>  yarn <br/>  pnpm </pre></div>
        <p class="caption "><b>Listing 14.1</b>    
            Initializing a Nest Project</p>
        <p class="standard">During the initialization process, you’ll be asked which package manager<a class="indexanchor" id="i14_12"/> you want to use for your application. The choices here are Node Package Manager (npm)<a class="indexanchor" id="i14_13"/>, Yarn<a class="indexanchor" id="i14_14"/>, and <samp class="listingcharacter listingcharacter">pnpm</samp><a class="indexanchor" id="i14_15"/>. Note, however, that the package manager must already be installed on your system; otherwise, the initialization of your application will fail because the required dependencies can’t be installed.</p>
        <p class="standard"><a id="p415"/>The initialization process<a class="indexanchor" id="i14_16"/> creates a new directory named <span class="italic">movie-db</span> in the current directory as well as an initial file and directory hierarchy, and it installs all packages required to build and run the application.</p>
        <p class="standard">After the installation, you can change to the directory and start the application via the <samp class="listingcharacter listingcharacter">npm start</samp><a class="indexanchor" id="i14_17"/> command. On the console, you’ll receive a number of log outputs, as you can see in <span class="crossreference "><a href="14_001.html#l14.2">Listing 14.2</a></span>.</p>
        <div class="listing " id="l14.2"><pre>npm start<br/><br/>&gt; movie-db@0.0.1 start<br/>&gt; nest start<br/><br/>[Nest] 49481  - 08/09/2021, 05:44:17     LOG [NestFactory] <img alt="inline image" class="inline_image" src="bilder/umbruchpfeil.png"/><br/>  Starting Nest application...<br/>[Nest] 49481  - 08/09/2021, 05:44:17     LOG [InstanceLoader] <img alt="inline image" class="inline_image" src="bilder/umbruchpfeil.png"/><br/>  AppModule dependencies initialized +67ms<br/>[Nest] 49481  - 08/09/2021, 05:44:17     LOG [RoutesResolver] <img alt="inline image" class="inline_image" src="bilder/umbruchpfeil.png"/><br/>  AppController {/}: +44ms<br/>[Nest] 49481  - 08/09/2021, 05:44:17     LOG [RouterExplorer] <img alt="inline image" class="inline_image" src="bilder/umbruchpfeil.png"/><br/>  Mapped {/, GET} route +6ms<br/>[Nest] 49481  - 08/09/2021, 05:44:17     LOG [NestApplication] <img alt="inline image" class="inline_image" src="bilder/umbruchpfeil.png"/><br/>  Nest application successfully started +10ms </pre></div>
        <p class="caption "><b>Listing 14.2</b>    
            Nest Application Startup Process</p>
        <p class="standard">In the console output, Nest informs you about the individual steps in the startup process. The most important information here is that the app module<a class="indexanchor" id="i14_18"/> dependencies have been initialized, the app controller has been executed, and the <samp class="listingcharacter listingcharacter">GET</samp> route <samp class="listingcharacter listingcharacter">/</samp> has been mapped. Finally, Nest reports that the application has been successfully launched. This output tells you that your application currently has a route. If you extend your application, then this is a place to start troubleshooting in the event of an error.</p>
        <p class="standard">The <samp class="listingcharacter listingcharacter">npm start</samp> command binds the Nest process to port <samp class="listingcharacter listingcharacter">3000</samp><a class="indexanchor" id="i14_19"/> so that you can invoke your application in the browser at <span class="italic">http://localhost:3000</span> and get a view like the one shown in <span class="crossreference "><a href="14_001.html#f14.1">Figure 14.1</a></span>.</p>
        <div class="imagebox figure-type"><a href="img-f14.1.html" id="f14.1"><img alt="Nest Application Homepage" id="img-f14.1" src="bilderklein/klein14_001.png"/></a></div>
        <p class="caption "><b>Figure 14.1</b>    
            Nest Application Homepage</p>
        <div class="box box_standard">
            <h6 class="boxheading"><a id="p416"/>Customizing the Port</h6>
            <p class="standard first last">Port 3000 on your system may already be being used by another application. In such a case, you can change the port by opening the <span class="italic">main.ts</span> file in the <span class="italic">src</span> directory of your application and searching for the <samp class="listingcharacter listingcharacter">app.listen(3000)</samp> call. The <samp class="listingcharacter listingcharacter">listen</samp> method of the <samp class="listingcharacter listingcharacter">app</samp> object binds your application to the specified port. If you change this, your problem should be solved.</p>
        </div>
        <p class="standard">Before we get into extending the application, let’s briefly discuss the other features of the Nest CLI in the next step.</p>
    </div><p class="signatur"/>
                    </body>
                </html>