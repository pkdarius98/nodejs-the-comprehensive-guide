<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="Installation" name="title"/>
            <meta content="Sebastian Springer" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2022 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Node.js - The Comprehensive Guide - Installation" name="description"/>
            <meta content="en" name="language"/>
            <title>Installation</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000029756394" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_kapitel">
                        <div id="main">
        <h2 class="t2" id="h2.2">2.2    Compiling<a class="indexanchor" id="i02_73"/> and Installing</h2>
        <p class="standard">In this section, you’ll learn how to operate Node.js not by using binary packages or by installing it using an installer for your system, but by creating a customized installation from the source files for your system. The following sections describe how you can compile Node.js on a Linux system. This explanation is based on the assumption of a standard Ubuntu desktop installation<a class="indexanchor" id="i02_74"/> in version 20.04.2.0 LTS. The first step of the installation is that you need to download the Node.js source code. This is available as a zipped tar archive in the download area on <span class="url"><a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></span>. Before you can start compiling Node.js, you should make sure that you have a compiler. By default, this isn’t the case with the desktop variant of Ubuntu. However, you can install the compiler via the system’s package manager, as shown in <span class="crossreference "><a href="02_002.html#l2.15">Listing 2.15</a></span>.</p>
        <div class="listing " id="l2.15"><pre>$ sudo apt-get install g++ </pre></div>
        <p class="caption "><b>Listing 2.15</b>    
            Installing the GNU Compiler Collection on Ubuntu</p>
        <p class="standard"><a id="p69"/>Once this requirement is met, you can unpack the source code package and go to the resulting directory, as shown in <span class="crossreference "><a href="02_002.html#l2.16">Listing 2.16</a></span>.</p>
        <div class="listing " id="l2.16"><pre>$ tar xvzf node-v16.8.0.tar.gz <br/>$ cd node-v16.8.0  </pre></div>
        <p class="caption "><b>Listing 2.16</b>    
            Unpacking the Node.js Source Code</p>
        <p class="standard">The first step of the actual compilation process consists of creating a makefile<a class="indexanchor" id="i02_75"/>. This file will later serve as the basis for the <samp class="listingcharacter listingcharacter">make</samp> command to compile Node.js. However, you don’t need to create the makefile manually; instead, you can use the <samp class="listingcharacter listingcharacter">configure</samp> program. You can pass additional information that’s relevant to the installation to this command. The available options include <samp class="listingcharacter listingcharacter">--without-npm</samp> to avoid installing the Node.js package manager as well, or <samp class="listingcharacter listingcharacter">--without-ssl</samp> to build Node.js without Secure Sockets Layer (SSL). Another option is to include different libraries such as V8, OpenSSL, or zlib as shared libraries<a class="indexanchor" id="i02_76"/> instead of linking them statically. The <samp class="listingcharacter listingcharacter">--dest-cpu=</samp> option allows you to select the target architecture<a class="indexanchor" id="i02_77"/>; possible values here are <samp class="listingcharacter listingcharacter">arm</samp>, <samp class="listingcharacter listingcharacter">ia32</samp>, and <samp class="listingcharacter listingcharacter">x64</samp>. You can also select the operating system<a class="indexanchor" id="i02_78"/> for which Node.js will be built. In this case, pass the <samp class="listingcharacter listingcharacter">--dest-os=</samp> option the values <samp class="listingcharacter listingcharacter">win</samp>, <samp class="listingcharacter listingcharacter">mac</samp>, or <samp class="listingcharacter listingcharacter">linux</samp>, among others.</p>
        <p class="standard">An important option for <samp class="listingcharacter listingcharacter">configure</samp> is <samp class="listingcharacter listingcharacter">--prefix</samp>. It specifies the location where Node.js should be installed. If you don’t use this option, the default <span class="italic">/usr/local</span> will be used. Relative to this path, all files from Node.js are copied to the system. You can use this option to maintain the possibility of installing multiple versions of Node.js on your system. By using the <samp class="listingcharacter listingcharacter">./configure --help</samp> command, you’ll get a list of all available configuration options, including short explanations.</p>
        <p class="standard"><span class="crossreference "><a href="02_002.html#l2.17">Listing 2.17</a></span> shows the next steps in the process.</p>
        <div class="listing " id="l2.17"><pre><span class="bold"><samp class="listingcharacter listingcharacter">$ ./configure --prefix=/opt/node/node-v16.8.0</samp></span><br/>...<br/><span class="bold"><samp class="listingcharacter listingcharacter">$ make</samp></span><br/>...<br/><span class="bold"><samp class="listingcharacter listingcharacter">$ sudo make install </samp></span><br/>... </pre></div>
        <p class="caption "><b>Listing 2.17</b>    
            Compiling and Installing Node.js on Ubuntu</p>
        <p class="standard">The first command in <span class="crossreference "><a href="02_002.html#l2.17">Listing 2.17</a></span>—<samp class="listingcharacter listingcharacter">configure</samp>—is used to create the makefile<a class="indexanchor" id="i02_79"/> for Node.js, as mentioned earlier. You can use the <samp class="listingcharacter listingcharacter">--prefix=/opt/node/node-v16.8.0</samp> option to install Node.js in a separate directory. This information is recorded in the makefile. The next command, <samp class="listingcharacter listingcharacter">make</samp>, builds on the information in the makefile and searches for the first target in it, that is, the description of what is to be done. Then it builds the project, in this case, Node.js, according to the information it finds there. The goal of this process step is to get an executable version of Node.js but still in the directory you’re currently in, which is the unpacked source code. Finally, the last command—<samp class="listingcharacter listingcharacter">make install</samp><a class="indexanchor" id="i02_80"/><a id="p70"/>—ensures that the compiled files are copied to the correct location in the system. For this reason, you must also run <samp class="listingcharacter listingcharacter">make install</samp> with <samp class="listingcharacter listingcharacter">root</samp> permissions<a class="indexanchor" id="i02_81"/> because a user should not normally have permissions to write to <span class="italic">/opt</span>, that is, to your current installation target.</p>
        <p class="standard">Once these steps have been completed, you should see a new directory called <span class="italic">node</span> in the <span class="italic">/opt</span> directory in your system. This is where your Node.js now resides. You can already test this in the <span class="italic">node-v16.8.0/bin</span> subdirectory by executing the <samp class="listingcharacter listingcharacter">node</samp> command with the <samp class="listingcharacter listingcharacter">-v</samp> option. The output you get is the version number of your Node.js installation. If this test has worked, you can remove the directory along with the unpacked source code<a class="indexanchor" id="i02_82"/> from your system, as you no longer need either. As with the binary packages on Linux, the problem of this installation option is that you can’t execute Node.js system-wide<a class="indexanchor" id="i02_83"/> from the command line, but must always specify the complete path to the executable file. The next section of this chapter goes into further detail about this problem.</p>
        <p class="standard">Installing Node.js in the <span class="italic">/opt</span> directory enables you to run multiple versions of Node.js in parallel on your system. If you develop an application that should work on different versions of Node.js and want to test this application, such an approach is a good idea. For example, you can run a version of each major version of Node.js and test your application in that environment. Normally, however, you probably want to have the latest version of Node.js available globally on your system. The easiest and fastest way to accomplish this is to create a symbolic link<a class="indexanchor" id="i02_84"/><a class="indexanchor" id="i02_85"/> to the version of Node.js you want to have available globally and include that symbolic link in your system’s search path. This procedure allows you to switch to another version of Node.js by customizing this link. <span class="crossreference "><a href="02_002.html#l2.18">Listing 2.18</a></span> demonstrates how you can create the link.</p>
        <div class="listing " id="l2.18"><pre>$ ln -s /opt/node/node-v16.8.0 /opt/node/node </pre></div>
        <p class="caption "><b>Listing 2.18</b>    
            Creating a Symbolic Link</p>
        <p class="standard">In a final step, you need to extend the search path<a class="indexanchor" id="i02_86"/> with an entry in the <span class="italic">/etc/profile</span> file, as shown in <span class="crossreference "><a href="02_002.html#l2.19">Listing 2.19</a></span>.</p>
        <div class="listing " id="l2.19"><pre>PATH=$PATH:/opt/node/node/bin<br/>export PATH </pre></div>
        <p class="caption "><b>Listing 2.19</b>    
            Extending the Search Path on Linux</p>
        <p class="standard">You now have a working installation of Node.js and can easily test it by entering the <samp class="listingcharacter listingcharacter">node</samp> command with the <samp class="listingcharacter listingcharacter">-v</samp> option in the command line. The output is the version number of the Node.js installation. You can now start developing your own applications with Node.js. As mentioned, <span class="crossreference "><a href="03_001.html#h3">Chapter 3</a></span> provides a first introduction to developing with Node.js and shows how you can implement your first application in a step-by-step process.</p>
    </div><p class="signatur"/>
                    </body>
                </html>